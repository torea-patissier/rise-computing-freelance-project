{"ast":null,"code":"import { getDocument } from 'ssr-window';\nimport { createElement, elementChildren, setCSSProperty } from '../../shared/utils.js';\nexport default function Virtual({\n  swiper,\n  extendParams,\n  on,\n  emit\n}) {\n  extendParams({\n    virtual: {\n      enabled: false,\n      slides: [],\n      cache: true,\n      renderSlide: null,\n      renderExternal: null,\n      renderExternalUpdate: true,\n      addSlidesBefore: 0,\n      addSlidesAfter: 0\n    }\n  });\n  let cssModeTimeout;\n  const document = getDocument();\n  swiper.virtual = {\n    cache: {},\n    from: undefined,\n    to: undefined,\n    slides: [],\n    offset: 0,\n    slidesGrid: []\n  };\n  const tempDOM = document.createElement('div');\n\n  function renderSlide(slide, index) {\n    const params = swiper.params.virtual;\n\n    if (params.cache && swiper.virtual.cache[index]) {\n      return swiper.virtual.cache[index];\n    } // eslint-disable-next-line\n\n\n    let slideEl;\n\n    if (params.renderSlide) {\n      slideEl = params.renderSlide.call(swiper, slide, index);\n\n      if (typeof slideEl === 'string') {\n        tempDOM.innerHTML = slideEl;\n        slideEl = tempDOM.children[0];\n      }\n    } else if (swiper.isElement) {\n      slideEl = createElement('swiper-slide');\n    } else {\n      slideEl = createElement('div', swiper.params.slideClass);\n    }\n\n    slideEl.setAttribute('data-swiper-slide-index', index);\n\n    if (!params.renderSlide) {\n      slideEl.textContent = slide;\n    }\n\n    if (params.cache) swiper.virtual.cache[index] = slideEl;\n    return slideEl;\n  }\n\n  function update(force) {\n    const {\n      slidesPerView,\n      slidesPerGroup,\n      centeredSlides,\n      loop: isLoop\n    } = swiper.params;\n    const {\n      addSlidesBefore,\n      addSlidesAfter\n    } = swiper.params.virtual;\n    const {\n      from: previousFrom,\n      to: previousTo,\n      slides,\n      slidesGrid: previousSlidesGrid,\n      offset: previousOffset\n    } = swiper.virtual;\n\n    if (!swiper.params.cssMode) {\n      swiper.updateActiveIndex();\n    }\n\n    const activeIndex = swiper.activeIndex || 0;\n    let offsetProp;\n    if (swiper.rtlTranslate) offsetProp = 'right';else offsetProp = swiper.isHorizontal() ? 'left' : 'top';\n    let slidesAfter;\n    let slidesBefore;\n\n    if (centeredSlides) {\n      slidesAfter = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesAfter;\n      slidesBefore = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesBefore;\n    } else {\n      slidesAfter = slidesPerView + (slidesPerGroup - 1) + addSlidesAfter;\n      slidesBefore = (isLoop ? slidesPerView : slidesPerGroup) + addSlidesBefore;\n    }\n\n    let from = activeIndex - slidesBefore;\n    let to = activeIndex + slidesAfter;\n\n    if (!isLoop) {\n      from = Math.max(from, 0);\n      to = Math.min(to, slides.length - 1);\n    }\n\n    let offset = (swiper.slidesGrid[from] || 0) - (swiper.slidesGrid[0] || 0);\n\n    if (isLoop && activeIndex >= slidesBefore) {\n      from -= slidesBefore;\n      if (!centeredSlides) offset += swiper.slidesGrid[0];\n    } else if (isLoop && activeIndex < slidesBefore) {\n      from = -slidesBefore;\n      if (centeredSlides) offset += swiper.slidesGrid[0];\n    }\n\n    Object.assign(swiper.virtual, {\n      from,\n      to,\n      offset,\n      slidesGrid: swiper.slidesGrid,\n      slidesBefore,\n      slidesAfter\n    });\n\n    function onRendered() {\n      swiper.updateSlides();\n      swiper.updateProgress();\n      swiper.updateSlidesClasses();\n      emit('virtualUpdate');\n    }\n\n    if (previousFrom === from && previousTo === to && !force) {\n      if (swiper.slidesGrid !== previousSlidesGrid && offset !== previousOffset) {\n        swiper.slides.forEach(slideEl => {\n          slideEl.style[offsetProp] = `${offset}px`;\n        });\n      }\n\n      swiper.updateProgress();\n      emit('virtualUpdate');\n      return;\n    }\n\n    if (swiper.params.virtual.renderExternal) {\n      swiper.params.virtual.renderExternal.call(swiper, {\n        offset,\n        from,\n        to,\n        slides: function getSlides() {\n          const slidesToRender = [];\n\n          for (let i = from; i <= to; i += 1) {\n            slidesToRender.push(slides[i]);\n          }\n\n          return slidesToRender;\n        }()\n      });\n\n      if (swiper.params.virtual.renderExternalUpdate) {\n        onRendered();\n      } else {\n        emit('virtualUpdate');\n      }\n\n      return;\n    }\n\n    const prependIndexes = [];\n    const appendIndexes = [];\n\n    const getSlideIndex = index => {\n      let slideIndex = index;\n\n      if (index < 0) {\n        slideIndex = slides.length + index;\n      } else if (slideIndex >= slides.length) {\n        // eslint-disable-next-line\n        slideIndex = slideIndex - slides.length;\n      }\n\n      return slideIndex;\n    };\n\n    if (force) {\n      swiper.slidesEl.querySelectorAll(`.${swiper.params.slideClass}, swiper-slide`).forEach(slideEl => {\n        slideEl.remove();\n      });\n    } else {\n      for (let i = previousFrom; i <= previousTo; i += 1) {\n        if (i < from || i > to) {\n          const slideIndex = getSlideIndex(i);\n          swiper.slidesEl.querySelectorAll(`.${swiper.params.slideClass}[data-swiper-slide-index=\"${slideIndex}\"], swiper-slide[data-swiper-slide-index=\"${slideIndex}\"]`).forEach(slideEl => {\n            slideEl.remove();\n          });\n        }\n      }\n    }\n\n    const loopFrom = isLoop ? -slides.length : 0;\n    const loopTo = isLoop ? slides.length * 2 : slides.length;\n\n    for (let i = loopFrom; i < loopTo; i += 1) {\n      if (i >= from && i <= to) {\n        const slideIndex = getSlideIndex(i);\n\n        if (typeof previousTo === 'undefined' || force) {\n          appendIndexes.push(slideIndex);\n        } else {\n          if (i > previousTo) appendIndexes.push(slideIndex);\n          if (i < previousFrom) prependIndexes.push(slideIndex);\n        }\n      }\n    }\n\n    appendIndexes.forEach(index => {\n      swiper.slidesEl.append(renderSlide(slides[index], index));\n    });\n\n    if (isLoop) {\n      for (let i = prependIndexes.length - 1; i >= 0; i -= 1) {\n        const index = prependIndexes[i];\n        swiper.slidesEl.prepend(renderSlide(slides[index], index));\n      }\n    } else {\n      prependIndexes.sort((a, b) => b - a);\n      prependIndexes.forEach(index => {\n        swiper.slidesEl.prepend(renderSlide(slides[index], index));\n      });\n    }\n\n    elementChildren(swiper.slidesEl, '.swiper-slide, swiper-slide').forEach(slideEl => {\n      slideEl.style[offsetProp] = `${offset}px`;\n    });\n    onRendered();\n  }\n\n  function appendSlide(slides) {\n    if (typeof slides === 'object' && 'length' in slides) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.push(slides[i]);\n      }\n    } else {\n      swiper.virtual.slides.push(slides);\n    }\n\n    update(true);\n  }\n\n  function prependSlide(slides) {\n    const activeIndex = swiper.activeIndex;\n    let newActiveIndex = activeIndex + 1;\n    let numberOfNewSlides = 1;\n\n    if (Array.isArray(slides)) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.unshift(slides[i]);\n      }\n\n      newActiveIndex = activeIndex + slides.length;\n      numberOfNewSlides = slides.length;\n    } else {\n      swiper.virtual.slides.unshift(slides);\n    }\n\n    if (swiper.params.virtual.cache) {\n      const cache = swiper.virtual.cache;\n      const newCache = {};\n      Object.keys(cache).forEach(cachedIndex => {\n        const cachedEl = cache[cachedIndex];\n        const cachedElIndex = cachedEl.getAttribute('data-swiper-slide-index');\n\n        if (cachedElIndex) {\n          cachedEl.setAttribute('data-swiper-slide-index', parseInt(cachedElIndex, 10) + numberOfNewSlides);\n        }\n\n        newCache[parseInt(cachedIndex, 10) + numberOfNewSlides] = cachedEl;\n      });\n      swiper.virtual.cache = newCache;\n    }\n\n    update(true);\n    swiper.slideTo(newActiveIndex, 0);\n  }\n\n  function removeSlide(slidesIndexes) {\n    if (typeof slidesIndexes === 'undefined' || slidesIndexes === null) return;\n    let activeIndex = swiper.activeIndex;\n\n    if (Array.isArray(slidesIndexes)) {\n      for (let i = slidesIndexes.length - 1; i >= 0; i -= 1) {\n        swiper.virtual.slides.splice(slidesIndexes[i], 1);\n\n        if (swiper.params.virtual.cache) {\n          delete swiper.virtual.cache[slidesIndexes[i]];\n        }\n\n        if (slidesIndexes[i] < activeIndex) activeIndex -= 1;\n        activeIndex = Math.max(activeIndex, 0);\n      }\n    } else {\n      swiper.virtual.slides.splice(slidesIndexes, 1);\n\n      if (swiper.params.virtual.cache) {\n        delete swiper.virtual.cache[slidesIndexes];\n      }\n\n      if (slidesIndexes < activeIndex) activeIndex -= 1;\n      activeIndex = Math.max(activeIndex, 0);\n    }\n\n    update(true);\n    swiper.slideTo(activeIndex, 0);\n  }\n\n  function removeAllSlides() {\n    swiper.virtual.slides = [];\n\n    if (swiper.params.virtual.cache) {\n      swiper.virtual.cache = {};\n    }\n\n    update(true);\n    swiper.slideTo(0, 0);\n  }\n\n  on('beforeInit', () => {\n    if (!swiper.params.virtual.enabled) return;\n    let domSlidesAssigned;\n\n    if (typeof swiper.passedParams.virtual.slides === 'undefined') {\n      const slides = swiper.slidesEl.querySelectorAll(`.${swiper.params.slideClass}, swiper-slide`);\n\n      if (slides && slides.length) {\n        swiper.virtual.slides = [...slides];\n        domSlidesAssigned = true;\n        slides.forEach((slideEl, slideIndex) => {\n          slideEl.setAttribute('data-swiper-slide-index', slideIndex);\n          swiper.virtual.cache[slideIndex] = slideEl;\n          slideEl.remove();\n        });\n      }\n    }\n\n    if (!domSlidesAssigned) {\n      swiper.virtual.slides = swiper.params.virtual.slides;\n    }\n\n    swiper.classNames.push(`${swiper.params.containerModifierClass}virtual`);\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n\n    if (!swiper.params.initialSlide) {\n      update();\n    }\n  });\n  on('setTranslate', () => {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode && !swiper._immediateVirtual) {\n      clearTimeout(cssModeTimeout);\n      cssModeTimeout = setTimeout(() => {\n        update();\n      }, 100);\n    } else {\n      update();\n    }\n  });\n  on('init update resize', () => {\n    if (!swiper.params.virtual.enabled) return;\n\n    if (swiper.params.cssMode) {\n      setCSSProperty(swiper.wrapperEl, '--swiper-virtual-size', `${swiper.virtualSize}px`);\n    }\n  });\n  Object.assign(swiper.virtual, {\n    appendSlide,\n    prependSlide,\n    removeSlide,\n    removeAllSlides,\n    update\n  });\n}","map":{"version":3,"sources":["/Users/torea/Desktop/freelanceProject2/open-react-template/node_modules/swiper/modules/virtual/virtual.js"],"names":["getDocument","createElement","elementChildren","setCSSProperty","Virtual","swiper","extendParams","on","emit","virtual","enabled","slides","cache","renderSlide","renderExternal","renderExternalUpdate","addSlidesBefore","addSlidesAfter","cssModeTimeout","document","from","undefined","to","offset","slidesGrid","tempDOM","slide","index","params","slideEl","call","innerHTML","children","isElement","slideClass","setAttribute","textContent","update","force","slidesPerView","slidesPerGroup","centeredSlides","loop","isLoop","previousFrom","previousTo","previousSlidesGrid","previousOffset","cssMode","updateActiveIndex","activeIndex","offsetProp","rtlTranslate","isHorizontal","slidesAfter","slidesBefore","Math","floor","max","min","length","Object","assign","onRendered","updateSlides","updateProgress","updateSlidesClasses","forEach","style","getSlides","slidesToRender","i","push","prependIndexes","appendIndexes","getSlideIndex","slideIndex","slidesEl","querySelectorAll","remove","loopFrom","loopTo","append","prepend","sort","a","b","appendSlide","prependSlide","newActiveIndex","numberOfNewSlides","Array","isArray","unshift","newCache","keys","cachedIndex","cachedEl","cachedElIndex","getAttribute","parseInt","slideTo","removeSlide","slidesIndexes","splice","removeAllSlides","domSlidesAssigned","passedParams","classNames","containerModifierClass","watchSlidesProgress","originalParams","initialSlide","_immediateVirtual","clearTimeout","setTimeout","wrapperEl","virtualSize"],"mappings":"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","sourcesContent":["import { getDocument } from 'ssr-window';\nimport { createElement, elementChildren, setCSSProperty } from '../../shared/utils.js';\nexport default function Virtual({\n  swiper,\n  extendParams,\n  on,\n  emit\n}) {\n  extendParams({\n    virtual: {\n      enabled: false,\n      slides: [],\n      cache: true,\n      renderSlide: null,\n      renderExternal: null,\n      renderExternalUpdate: true,\n      addSlidesBefore: 0,\n      addSlidesAfter: 0\n    }\n  });\n  let cssModeTimeout;\n  const document = getDocument();\n  swiper.virtual = {\n    cache: {},\n    from: undefined,\n    to: undefined,\n    slides: [],\n    offset: 0,\n    slidesGrid: []\n  };\n  const tempDOM = document.createElement('div');\n  function renderSlide(slide, index) {\n    const params = swiper.params.virtual;\n    if (params.cache && swiper.virtual.cache[index]) {\n      return swiper.virtual.cache[index];\n    }\n    // eslint-disable-next-line\n    let slideEl;\n    if (params.renderSlide) {\n      slideEl = params.renderSlide.call(swiper, slide, index);\n      if (typeof slideEl === 'string') {\n        tempDOM.innerHTML = slideEl;\n        slideEl = tempDOM.children[0];\n      }\n    } else if (swiper.isElement) {\n      slideEl = createElement('swiper-slide');\n    } else {\n      slideEl = createElement('div', swiper.params.slideClass);\n    }\n    slideEl.setAttribute('data-swiper-slide-index', index);\n    if (!params.renderSlide) {\n      slideEl.textContent = slide;\n    }\n    if (params.cache) swiper.virtual.cache[index] = slideEl;\n    return slideEl;\n  }\n  function update(force) {\n    const {\n      slidesPerView,\n      slidesPerGroup,\n      centeredSlides,\n      loop: isLoop\n    } = swiper.params;\n    const {\n      addSlidesBefore,\n      addSlidesAfter\n    } = swiper.params.virtual;\n    const {\n      from: previousFrom,\n      to: previousTo,\n      slides,\n      slidesGrid: previousSlidesGrid,\n      offset: previousOffset\n    } = swiper.virtual;\n    if (!swiper.params.cssMode) {\n      swiper.updateActiveIndex();\n    }\n    const activeIndex = swiper.activeIndex || 0;\n    let offsetProp;\n    if (swiper.rtlTranslate) offsetProp = 'right';else offsetProp = swiper.isHorizontal() ? 'left' : 'top';\n    let slidesAfter;\n    let slidesBefore;\n    if (centeredSlides) {\n      slidesAfter = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesAfter;\n      slidesBefore = Math.floor(slidesPerView / 2) + slidesPerGroup + addSlidesBefore;\n    } else {\n      slidesAfter = slidesPerView + (slidesPerGroup - 1) + addSlidesAfter;\n      slidesBefore = (isLoop ? slidesPerView : slidesPerGroup) + addSlidesBefore;\n    }\n    let from = activeIndex - slidesBefore;\n    let to = activeIndex + slidesAfter;\n    if (!isLoop) {\n      from = Math.max(from, 0);\n      to = Math.min(to, slides.length - 1);\n    }\n    let offset = (swiper.slidesGrid[from] || 0) - (swiper.slidesGrid[0] || 0);\n    if (isLoop && activeIndex >= slidesBefore) {\n      from -= slidesBefore;\n      if (!centeredSlides) offset += swiper.slidesGrid[0];\n    } else if (isLoop && activeIndex < slidesBefore) {\n      from = -slidesBefore;\n      if (centeredSlides) offset += swiper.slidesGrid[0];\n    }\n    Object.assign(swiper.virtual, {\n      from,\n      to,\n      offset,\n      slidesGrid: swiper.slidesGrid,\n      slidesBefore,\n      slidesAfter\n    });\n    function onRendered() {\n      swiper.updateSlides();\n      swiper.updateProgress();\n      swiper.updateSlidesClasses();\n      emit('virtualUpdate');\n    }\n    if (previousFrom === from && previousTo === to && !force) {\n      if (swiper.slidesGrid !== previousSlidesGrid && offset !== previousOffset) {\n        swiper.slides.forEach(slideEl => {\n          slideEl.style[offsetProp] = `${offset}px`;\n        });\n      }\n      swiper.updateProgress();\n      emit('virtualUpdate');\n      return;\n    }\n    if (swiper.params.virtual.renderExternal) {\n      swiper.params.virtual.renderExternal.call(swiper, {\n        offset,\n        from,\n        to,\n        slides: function getSlides() {\n          const slidesToRender = [];\n          for (let i = from; i <= to; i += 1) {\n            slidesToRender.push(slides[i]);\n          }\n          return slidesToRender;\n        }()\n      });\n      if (swiper.params.virtual.renderExternalUpdate) {\n        onRendered();\n      } else {\n        emit('virtualUpdate');\n      }\n      return;\n    }\n    const prependIndexes = [];\n    const appendIndexes = [];\n    const getSlideIndex = index => {\n      let slideIndex = index;\n      if (index < 0) {\n        slideIndex = slides.length + index;\n      } else if (slideIndex >= slides.length) {\n        // eslint-disable-next-line\n        slideIndex = slideIndex - slides.length;\n      }\n      return slideIndex;\n    };\n    if (force) {\n      swiper.slidesEl.querySelectorAll(`.${swiper.params.slideClass}, swiper-slide`).forEach(slideEl => {\n        slideEl.remove();\n      });\n    } else {\n      for (let i = previousFrom; i <= previousTo; i += 1) {\n        if (i < from || i > to) {\n          const slideIndex = getSlideIndex(i);\n          swiper.slidesEl.querySelectorAll(`.${swiper.params.slideClass}[data-swiper-slide-index=\"${slideIndex}\"], swiper-slide[data-swiper-slide-index=\"${slideIndex}\"]`).forEach(slideEl => {\n            slideEl.remove();\n          });\n        }\n      }\n    }\n    const loopFrom = isLoop ? -slides.length : 0;\n    const loopTo = isLoop ? slides.length * 2 : slides.length;\n    for (let i = loopFrom; i < loopTo; i += 1) {\n      if (i >= from && i <= to) {\n        const slideIndex = getSlideIndex(i);\n        if (typeof previousTo === 'undefined' || force) {\n          appendIndexes.push(slideIndex);\n        } else {\n          if (i > previousTo) appendIndexes.push(slideIndex);\n          if (i < previousFrom) prependIndexes.push(slideIndex);\n        }\n      }\n    }\n    appendIndexes.forEach(index => {\n      swiper.slidesEl.append(renderSlide(slides[index], index));\n    });\n    if (isLoop) {\n      for (let i = prependIndexes.length - 1; i >= 0; i -= 1) {\n        const index = prependIndexes[i];\n        swiper.slidesEl.prepend(renderSlide(slides[index], index));\n      }\n    } else {\n      prependIndexes.sort((a, b) => b - a);\n      prependIndexes.forEach(index => {\n        swiper.slidesEl.prepend(renderSlide(slides[index], index));\n      });\n    }\n    elementChildren(swiper.slidesEl, '.swiper-slide, swiper-slide').forEach(slideEl => {\n      slideEl.style[offsetProp] = `${offset}px`;\n    });\n    onRendered();\n  }\n  function appendSlide(slides) {\n    if (typeof slides === 'object' && 'length' in slides) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.push(slides[i]);\n      }\n    } else {\n      swiper.virtual.slides.push(slides);\n    }\n    update(true);\n  }\n  function prependSlide(slides) {\n    const activeIndex = swiper.activeIndex;\n    let newActiveIndex = activeIndex + 1;\n    let numberOfNewSlides = 1;\n    if (Array.isArray(slides)) {\n      for (let i = 0; i < slides.length; i += 1) {\n        if (slides[i]) swiper.virtual.slides.unshift(slides[i]);\n      }\n      newActiveIndex = activeIndex + slides.length;\n      numberOfNewSlides = slides.length;\n    } else {\n      swiper.virtual.slides.unshift(slides);\n    }\n    if (swiper.params.virtual.cache) {\n      const cache = swiper.virtual.cache;\n      const newCache = {};\n      Object.keys(cache).forEach(cachedIndex => {\n        const cachedEl = cache[cachedIndex];\n        const cachedElIndex = cachedEl.getAttribute('data-swiper-slide-index');\n        if (cachedElIndex) {\n          cachedEl.setAttribute('data-swiper-slide-index', parseInt(cachedElIndex, 10) + numberOfNewSlides);\n        }\n        newCache[parseInt(cachedIndex, 10) + numberOfNewSlides] = cachedEl;\n      });\n      swiper.virtual.cache = newCache;\n    }\n    update(true);\n    swiper.slideTo(newActiveIndex, 0);\n  }\n  function removeSlide(slidesIndexes) {\n    if (typeof slidesIndexes === 'undefined' || slidesIndexes === null) return;\n    let activeIndex = swiper.activeIndex;\n    if (Array.isArray(slidesIndexes)) {\n      for (let i = slidesIndexes.length - 1; i >= 0; i -= 1) {\n        swiper.virtual.slides.splice(slidesIndexes[i], 1);\n        if (swiper.params.virtual.cache) {\n          delete swiper.virtual.cache[slidesIndexes[i]];\n        }\n        if (slidesIndexes[i] < activeIndex) activeIndex -= 1;\n        activeIndex = Math.max(activeIndex, 0);\n      }\n    } else {\n      swiper.virtual.slides.splice(slidesIndexes, 1);\n      if (swiper.params.virtual.cache) {\n        delete swiper.virtual.cache[slidesIndexes];\n      }\n      if (slidesIndexes < activeIndex) activeIndex -= 1;\n      activeIndex = Math.max(activeIndex, 0);\n    }\n    update(true);\n    swiper.slideTo(activeIndex, 0);\n  }\n  function removeAllSlides() {\n    swiper.virtual.slides = [];\n    if (swiper.params.virtual.cache) {\n      swiper.virtual.cache = {};\n    }\n    update(true);\n    swiper.slideTo(0, 0);\n  }\n  on('beforeInit', () => {\n    if (!swiper.params.virtual.enabled) return;\n    let domSlidesAssigned;\n    if (typeof swiper.passedParams.virtual.slides === 'undefined') {\n      const slides = swiper.slidesEl.querySelectorAll(`.${swiper.params.slideClass}, swiper-slide`);\n      if (slides && slides.length) {\n        swiper.virtual.slides = [...slides];\n        domSlidesAssigned = true;\n        slides.forEach((slideEl, slideIndex) => {\n          slideEl.setAttribute('data-swiper-slide-index', slideIndex);\n          swiper.virtual.cache[slideIndex] = slideEl;\n          slideEl.remove();\n        });\n      }\n    }\n    if (!domSlidesAssigned) {\n      swiper.virtual.slides = swiper.params.virtual.slides;\n    }\n    swiper.classNames.push(`${swiper.params.containerModifierClass}virtual`);\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n    if (!swiper.params.initialSlide) {\n      update();\n    }\n  });\n  on('setTranslate', () => {\n    if (!swiper.params.virtual.enabled) return;\n    if (swiper.params.cssMode && !swiper._immediateVirtual) {\n      clearTimeout(cssModeTimeout);\n      cssModeTimeout = setTimeout(() => {\n        update();\n      }, 100);\n    } else {\n      update();\n    }\n  });\n  on('init update resize', () => {\n    if (!swiper.params.virtual.enabled) return;\n    if (swiper.params.cssMode) {\n      setCSSProperty(swiper.wrapperEl, '--swiper-virtual-size', `${swiper.virtualSize}px`);\n    }\n  });\n  Object.assign(swiper.virtual, {\n    appendSlide,\n    prependSlide,\n    removeSlide,\n    removeAllSlides,\n    update\n  });\n}"]},"metadata":{},"sourceType":"module"}